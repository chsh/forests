# FORESTS 画面操作説明 #

## サービストップ(ログイン前) ##
[image](1.before-login.png)

### ページの目的 ###

この画面はサービスにアクセスした際に表示されます。
このページを含め、右上にある「操作マニュアル」をクリックすると、別ページで操作マニュアルを確認することができます。

### 操作 ###
ログインボタンを押して、ログイン画面に進みます。

## ログイン ##
[image](2.login.png)

### ページの目的 ###
この画面では、IDの入力とパスワードを確認します。
ログイン後は、テーブル一覧画面に遷移します。

### 操作 ###
(1) にID、(2)にパスワードを入力してログインボタンを押します。

(3)のチェックボックスは、ブラウザを閉じてもログイン状態を継続する際に利用します。

ログイン名・パスワードが違っていると「ログイン名またはパスワードが違います。」というメッセージが黄色で表示されます。ログイン名が無効になっていると「該当ユーザはアカウントが無効です。」と赤色で表示されます。


## テーブル一覧 ##
[image](4.table-list.png)

### ページの目的 ###
テーブルの一覧表示および、新規テーブルの作成に進む画面です。

### 操作 ###
(1)でテーブルの詳細情報に移動します。

(2) でテーブルの名称を変更できます。

(3) でテーブルを削除します。

(4) でテーブルを新規に作成する画面に進みます。


## テーブル新規作成 ##
[image](5.new-table.png)

### ページの目的 ###
テーブルを新規に作成します。テーブルの新規作成は、テーブルの管理権限を持っているユーザのみ可能です。

### 操作 ###
(1) に作成したいテーブルの名称を入力します。
名称はシステムの中で利用されません。
日本語も含め自由に登録できます。
後から変更することも可能です。

(2) 基本データとなるファイルをアップロードします。
アップロードをしない場合、テーブルは空の状態で作成されます。
アップロードをする場合、そのファイル中で定義された項目名が自動的に作成され、項目に対応する形でデータも取り込まれます。
アップロードに利用できるファイル形式は、CSV, TSV, XLS。CSV, TSVの場合は文字コードが自動判別されます。

(1)と(2)の指定が終わったら、Create One Tableボタンをクリックし、アップロードを行います。
アップロードが終わるとすぐに次の画面に遷移しますが、サーバ上では継続して取り込み動作を行っています。

## テーブル操作 ##
[image](6.show-table.png)

### ページの目的 ###
テーブルに関する操作として、

* フィールド名の表示・編集
* レコードの表示・編集・検索
* データのアップロード
* 出力フォーマットの作成・ダウンロード
* テーブルのコピー(権限を有している人のみ)

などを行う中心的な画面です。

### 操作 ###
(1) でレコードの検索ができます。

(2) には「データ取り込み中」など、時間のかかる処理が行われているときにその内容が表示されます。この内容が表示されている間は、画面が一定のタイミングでリロードされ、進捗がわかるようになっています。

(3) でフィールド一覧の表示・編集画面に進みます。

(4) でレコード一覧の表示画面に進みます。

(5) データをアップロードします。フィールドに科目コードなどがユニークキー指定してある場合、そのキーを含むレコードは更新されます。
それ以外は追加されます。

(6) テーブルデータのコピーを行います。(権限を持っている利用者のみ表示されます)

(7) 出力フォーマット一覧画面に遷移します。

(8) 定義済みの出力フォーマット表示画面に遷移します。

(9) 定義済みの出力フォーマットでダウンロードを行います。

(10) 新しく出力フォーマットを作成します。

(11) 利用者の操作記録が表示されます。記録されるのは、ダウンロードおよびテーブルデータの更新に関連する操作です。

## フィールド一覧・編集 ##
[image](7.view-fields.png)

### ページの目的 ###
テーブルに定義されたフィールドを一覧・編集する画面です。

### 操作 ###
(1) 編集をクリックするとその行のフィールド内容が定義できる画面に遷移します。

(2) ユニークキー指定がある場合、この部分に「○」が表示されます。

(3) ページの最下部部分にあるリンクからフィールドを追加できます。テーブル削除権限以上を持っているユーザのみ表示されます。


## フィールド追加・編集画面 ##
[image](8.edit-fields.png)

### ページの目的 ###
フィールドの名称・データ型などを編集します。

### 操作 ###
(1) キー項目の場合はチェックします。１つのテーブルに対しキー項目は最大３つまでしか設定できません。すでに３つ設定されている場合、この項目はチェックできないようになります。

(2) 日本語名称です。ほかのフィールドのラベルと重複させることはできません。

(3) システム名です。英数字で表記しますが、なくてもかまいません。

(4) データ種別です。基本的には「コード（固定文字列）」「テキスト」「日付」「数字」のいずれかを使う形になります。

(5) 複数のデータを持つフィールドを設定する場合に指定しますが、現状ではデータを編集するインターフェースはなく、システム側での作業になります。

(6) メタデータ定義です。フィールドに特別に付与したい属性がある場合に指定しますが、システム側での利用に限定されますので、特に気にされなくても大丈夫です。

(7) 更新ボタンを押して登録ないし更新を行います。

## レコード一覧・編集 ##
[image](9.record-list.png)

### ページの目的 ###
レコードを表示、編集、削除するためのトップ画面です。
(今後レイアウトの改善予定があります)

### 操作 ###
(1) で検索を行います。

(2) で対象レコードを表示します。

(3) で対象レコードを編集します。

(4) で対象レコードを削除します。確認画面が表示されます。

## レコード表示 ##
[image](10.show-record.png)

### ページの目的 ###
１レコードの詳細を表示します。

### 操作 ###
特にありません。

## レコード編集 ##
[image](11.edit-record.png)

### ページの目的 ###
レコードを編集する画面です。

### 操作 ###
表示されているフィールドを編集し、終了したら画面最下部にある「更新」ボタンを押します。グレーで表示されているフィールドがある場合、それは他のフィールド値からシステムが自動的に作成するフィールドのため、編集することはできません。

## データアップロード ##
[image](12.data-upload.png)

### ページの目的 ###
データファイルをアップロードする画面です。

アップロード時にエラーがあった場合、この画面でエラーの内容を確認できます。

データファイルのサイズにもよりますが、アップロードは時間がかかります。アップロードが終わったらテーブル表示画面に戻ると、データの取り込み状況を確認することができます。

### 操作 ###
(1) アップロードするデータファイルを選択します。

(2) アップロードを実行します。

(3) アップロードエラーがあった場合、エラー内容が表示されます。

## 出力フォーマット一覧 ##
[image](13.outputformat-list.png)

### ページの目的 ###
出力フォーマットの名称と出力形式の詳細を表示し、閲覧・ダウンロード・編集・削除といった操作が行えます。

テーブル表示画面の右側にも同様の表示エリアがありますが、こちらはすべてのフォーマットが表示されます。

### 操作 ###
(1) ダウンロードを実行します。

(2) 設定内容が表示される画面に遷移します。

(3) 設定内容を編集する画面に遷移します。

(4) 出力フォーマットを削除します。

## 出力フォーマット表示 ##
[image](14.show-outputformat.png)

### ページの目的 ###
テーブル定義に対し、どのフィールドが出力内容となっているかを表示する画面です。また、テーブル定義とは異なるフィールド名称を持つデータがある場合、この画面を経由してアップロードを行います。

### 操作 ###
(1) でアップロードファイルを指定し、(2)で実施します。

テーブル定義と異なるフィールド名称がある場合(3)に表示されます。

出力対象フィールドとその順序は(4)に表示されます。


## 出力フォーマット編集 ##
[image](15.edit-outputformat.png)

### ページの目的 ###
出力フォーマットを定義します。

### 操作 ###
(1) 出力フォーマットの名称を定義します。システム的には利用されませんので自由に名前をつけることができます。

(2) デフォルトの出力フォーマットです。CSV, TSV(タブ区切りテキスト)が選択できます。

(3) デフォルトの出力文字コードです。Windows ShiftJIS(CP932)、EUC-JP、UTF-8が選択できます。

(4) デフォルトの改行コードです。Windows (CR+LF)、Unix(LF), 旧Mac(CR)が選択できます。

(5) 検索キーワードです。これがある場合、この検索キーワードにヒットするレコードのみ出力されます。

(6) 出力レコードのソートキーフィールド名です。(7)が出力の順序です。ソートキーは(8), (9)のように３段階まで指定できます。

(10) フィールド名です。

(11) 出力フォーマットで用いるフィールド名が(10)と異なる場合、ここで指定します。

(12) 出力対象フィールドを指定します。数字が入っているものが出力対象となり、小さい数字から大きい数字に向かってフィールド値が並びます。数字の大小だけを比較しているので、順番が飛んでいてもかまいません。

(13) フィールド単位での検索語を指定します。

(14) 出力フィールド指定時にわかりやすいようデータの一部を表示しています。

## ユーザ管理 ##
[image](16.user-list.png)

### ページの目的 ###
ユーザの一覧を確認します。

### 操作 ###
(1) 作成したユーザの情報を編集する画面に遷移します。

(2) 新しくユーザを作成します。

## ユーザ編集 ##
[image](17.user-edit.png)

### ページの目的 ###
ユーザ情報を編集します。

### 操作 ###
(1) Level: ユーザの権限を設定します。

* (アカウント無効)
* データ閲覧可能
* データ閲覧・編集可能
* データ閲覧・編集・削除可能
* システム管理者

のいずれかを選択できます。

(2) Login: ログイン名です。必須項目です。他と重複する名前はつけられません。

(3) Email: メールアドレスです。設定は任意です。

(4) パスワード: パスワードを設定します。

Update Userで情報を更新します。
